<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Commerce Store - Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
    
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .home-wrapper {
            max-width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Hero Slider */
        .hero-slider {
            position: relative;
            width: 100%;
            height: 500px;
            overflow: hidden;
            background: #1f2937;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .slide.active {
            opacity: 1;
        }

        .slide-content {
            max-width: 800px;
            padding: 2rem;
            z-index: 1;
        }

        .slide-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .slide-subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .slide-cta {
            display: inline-block;
            background: white;
            color: #1f2937;
            padding: 1rem 3rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1rem;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .slide-cta:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .slider-nav {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 2;
        }

        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider-dot.active {
            background: white;
            width: 30px;
            border-radius: 6px;
        }

        .slider-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.3);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            backdrop-filter: blur(10px);
        }

        .slider-arrow:hover {
            background: rgba(255,255,255,0.5);
        }

        .slider-arrow.prev {
            left: 20px;
        }

        .slider-arrow.next {
            right: 20px;
        }

        /* Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Section Styling */
        .section-wrapper {
            padding: 4rem 0;
            background: white;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: #6b7280;
        }

        /* Categories Grid */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 2rem;
            margin-top: 2.5rem;
        }

        .category-card {
            background: white;
            border-radius: 12px;
            padding: 2rem 1.5rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 2px solid #f3f4f6;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .category-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .category-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .category-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1f2937;
        }

        .category-count {
            font-size: 0.85rem;
            color: #6b7280;
            margin-top: 0.3rem;
        }

        /* Featured Products */
        .featured-section {
            padding: 4rem 0;
            background: #f9fafb;
        }

        .products-scroll {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2.5rem;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 2px solid #f3f4f6;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .product-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            background: #e5e7eb;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-name {
            font-size: 1.05rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.8rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 3rem;
        }

        .product-price {
            font-size: 1.6rem;
            font-weight: 800;
            color: #ef4444;
            margin-bottom: 0.5rem;
        }

        .product-rating {
            color: #f59e0b;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        /* Promo Banners */
        .promo-section {
            padding: 3rem 0;
        }

        .promo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 2.5rem;
        }

        .promo-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }

        .promo-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .promo-card h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .promo-card p {
            font-size: 1.2rem;
            opacity: 0.95;
        }

        /* Deals Section */
        .deals-section {
            padding: 4rem 0;
            background: white;
        }

        .deals-timer {
            background: #fef3c7;
            color: #92400e;
            padding: 1rem 2rem;
            border-radius: 8px;
            display: inline-block;
            font-weight: 700;
            margin-bottom: 2rem;
        }

        /* Footer CTA */
        .footer-cta {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 5rem 2rem;
            text-align: center;
            margin-top: 0;
        }

        .footer-cta h2 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 1rem;
        }

        .footer-cta p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            opacity: 0.95;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-slider {
                height: 350px;
            }
            
            .slide-title {
                font-size: 2rem;
            }
            
            .slide-subtitle {
                font-size: 1.1rem;
            }
            
            .categories-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 1.5rem;
            }

            .section-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <h1 onclick="window.location.href='/'">üõí E-Commerce Store</h1>
        <div class="nav-links">
            <a href="/" class="active">Home</a>
            <a href="/web/admin" id="adminLink" style="display:none;">Dashboard</a>
            <a href="/web/products">Products</a>
            <a href="/web/cart">Cart (<span id="cartCount">0</span>)</a>
            <a href="/web/orders" id="ordersLink" style="display:none;">My Orders</a>
            <a href="/web/profile" id="profileLink" style="display:none;">Profile</a>
            
            <span id="userName"></span>
            <button id="logoutBtn" style="display:none;" onclick="logout()">Logout</button>
            <a href="/web/login" id="loginLink">Login</a>
            <a href="/web/register" id="registerLink">Register</a>
        </div>
    </nav>

    <div class="home-wrapper">
        <!-- Hero Slider -->
        <div class="hero-slider">
            <button class="slider-arrow prev" onclick="changeSlide(-1)">‚Äπ</button>
            <button class="slider-arrow next" onclick="changeSlide(1)">‚Ä∫</button>
            
            <div class="slide active" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="slide-content">
                    <h1 class="slide-title">Welcome to Our Store</h1>
                    <p class="slide-subtitle">Discover amazing products at unbeatable prices</p>
                    <a href="/web/products" class="slide-cta">Shop Now ‚Üí</a>
                </div>
            </div>
            
            <div class="slide" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <div class="slide-content">
                    <h1 class="slide-title">üéâ Special Offers</h1>
                    <p class="slide-subtitle">Free shipping on orders over $50</p>
                    <a href="/web/products" class="slide-cta">Browse Deals ‚Üí</a>
                </div>
            </div>
            
            <div class="slide" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <div class="slide-content">
                    <h1 class="slide-title">‚ö° New Arrivals</h1>
                    <p class="slide-subtitle">Check out our latest products</p>
                    <a href="/web/products" class="slide-cta">Explore New ‚Üí</a>
                </div>
            </div>
            
            <div class="slider-nav">
                <span class="slider-dot active" onclick="goToSlide(0)"></span>
                <span class="slider-dot" onclick="goToSlide(1)"></span>
                <span class="slider-dot" onclick="goToSlide(2)"></span>
            </div>
        </div>

        <!-- Categories Section -->
        <div class="section-wrapper">
            <div class="main-container">
                <div class="section-header">
                    <h2 class="section-title">Shop by Category</h2>
                    <p class="section-subtitle">Explore our wide range of products</p>
                </div>
                <div class="categories-grid" id="categoriesGrid">
                    <!-- Dynamically loaded -->
                </div>
            </div>
        </div>

        <!-- Promo Banners -->
        <div class="promo-section">
            <div class="main-container">
                <div class="promo-grid">
                    <div class="promo-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <h3>üöö Free Shipping</h3>
                        <p>On all orders over $50</p>
                    </div>
                    <div class="promo-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <h3>üîí Secure Payment</h3>
                        <p>100% secure checkout</p>
                    </div>
                    <div class="promo-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <h3>‚ö° Fast Delivery</h3>
                        <p>Quick nationwide shipping</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Featured Products -->
        <div class="featured-section">
            <div class="main-container">
                <div class="section-header">
                    <h2 class="section-title">Featured Products</h2>
                    <p class="section-subtitle">Handpicked items just for you</p>
                </div>
                <div class="products-scroll" id="featuredProducts">
                    <!-- Dynamically loaded -->
                </div>
            </div>
        </div>

        <!-- Deals of the Day -->
        <div class="deals-section">
            <div class="main-container">
                <div class="section-header">
                    <div class="deals-timer">‚è∞ Deals of the Day - Limited Time Only!</div>
                    <h2 class="section-title">Today's Best Deals</h2>
                    <p class="section-subtitle">Save big on these amazing products</p>
                </div>
                <div class="products-scroll" id="dealsProducts">
                    <!-- Dynamically loaded -->
                </div>
            </div>
        </div>

        <!-- Footer CTA -->
        <div class="footer-cta">
            <h2>Start Shopping Today!</h2>
            <p>Join thousands of happy customers</p>
            <a href="/web/products" style="display:inline-block;background:white;color:#10b981;padding:1.2rem 3rem;border-radius:10px;font-weight:700;font-size:1.1rem;text-decoration:none;transition:all 0.3s ease;" 
               onmouseover="this.style.transform='translateY(-3px)';this.style.boxShadow='0 10px 30px rgba(0,0,0,0.2)'" 
               onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
                Browse All Products ‚Üí
            </a>
        </div>
    </div>
    
    <!-- Footer -->
<footer style="background:#1f2937;color:white;padding:3rem 2rem;margin-top:4rem;">
    <div style="max-width:1400px;margin:0 auto;">
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:3rem;margin-bottom:3rem;">
            <!-- Company Info -->
            <div>
                <h3 style="font-size:1.5rem;margin-bottom:1rem;font-weight:800;">üõí E-Commerce Store</h3>
                <p style="color:#9ca3af;line-height:1.6;">Your trusted online shopping destination for quality products at great prices.</p>
            </div>
            
            <!-- Quick Links -->
            <div>
                <h4 style="font-size:1.1rem;margin-bottom:1rem;font-weight:700;">Quick Links</h4>
                <ul style="list-style:none;padding:0;">
                    <li style="margin-bottom:0.5rem;"><a href="/" style="color:#9ca3af;text-decoration:none;transition:color 0.3s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">Home</a></li>
                    <li style="margin-bottom:0.5rem;"><a href="/web/products" style="color:#9ca3af;text-decoration:none;transition:color 0.3s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">Products</a></li>
                    <li style="margin-bottom:0.5rem;"><a href="/web/orders" style="color:#9ca3af;text-decoration:none;transition:color 0.3s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">My Orders</a></li>
                    <li style="margin-bottom:0.5rem;"><a href="/web/profile" style="color:#9ca3af;text-decoration:none;transition:color 0.3s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">Profile</a></li>
                </ul>
            </div>
            
            <!-- Customer Service -->
            <div>
    <h4 style="font-size:1.1rem;margin-bottom:1rem;font-weight:700;">Customer Service</h4>
    <ul style="list-style:none;padding:0;">
        <li style="margin-bottom:0.5rem;"><a href="/web/contact" style="color:#9ca3af;text-decoration:none;transition:color 0.3s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">Contact Us</a></li>
        <li style="margin-bottom:0.5rem;"><a href="/web/returns" style="color:#9ca3af;text-decoration:none;transition:color 0.3s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">Returns & Refunds</a></li>
        <li style="margin-bottom:0.5rem;"><a href="/web/privacy" style="color:#9ca3af;text-decoration:none;transition:color 0.3s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='#9ca3af'">Privacy Policy</a></li>
    </ul>
</div>
            
            <!-- Contact -->
            <div>
                <h4 style="font-size:1.1rem;margin-bottom:1rem;font-weight:700;">Get in Touch</h4>
                <p style="color:#9ca3af;margin-bottom:0.5rem;">üìß support@ecommerce.com</p>
                <p style="color:#9ca3af;margin-bottom:0.5rem;">üì± 1-800-SHOP-NOW</p>
                <p style="color:#9ca3af;">üìç 123 Commerce St, City, State 12345</p>
            </div>
        </div>
        
        <!-- Copyright Bar -->
        <div style="border-top:1px solid #374151;padding-top:2rem;text-align:center;">
            <p style="color:#9ca3af;margin-bottom:0.5rem;">
                ¬© <span id="currentYear"></span> E-Commerce Store. All rights reserved.
            </p>
            <p style="color:#6b7280;font-size:0.9rem;">
                Powered by Stripe | Secure Shopping Experience
            </p>
        </div>
    </div>
</footer>

<script>
    // Set current year automatically
    document.getElementById('currentYear').textContent = new Date().getFullYear();
</script>
    

    <script>
        const user = JSON.parse(localStorage.getItem('user'));
        const token = localStorage.getItem('token');
        let currentSlide = 0;
        let slideInterval;

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function logout() {
            localStorage.clear();
            window.location.href = '/';
        }

        function initNavbar() {
            updateCartCount();
            
            if (user && token) {
                document.getElementById('userName').textContent = 'Hi, ' + user.name;
                document.getElementById('logoutBtn').style.display = 'inline-block';
                document.getElementById('ordersLink').style.display = 'inline-block';
                document.getElementById('profileLink').style.display = 'inline-block';
                document.getElementById('loginLink').style.display = 'none';
                document.getElementById('registerLink').style.display = 'none';
                
                if (user.role === 'ADMIN') {
                    document.getElementById('adminLink').style.display = 'inline-block';
                }
            }
        }

        // Slider Functions
        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.slider-dot');
            
            if (n >= slides.length) currentSlide = 0;
            if (n < 0) currentSlide = slides.length - 1;
            
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        function changeSlide(direction) {
            currentSlide += direction;
            showSlide(currentSlide);
            resetSlideInterval();
        }

        function goToSlide(n) {
            currentSlide = n;
            showSlide(currentSlide);
            resetSlideInterval();
        }

        function autoSlide() {
            currentSlide++;
            showSlide(currentSlide);
        }

        function resetSlideInterval() {
            clearInterval(slideInterval);
            slideInterval = setInterval(autoSlide, 5000);
        }

        // Load Categories
        async function loadCategories() {
            try {
                const response = await fetch('/api/products');
                
                if (response.ok) {
                    const products = await response.json();
                    
                    const categoryMap = {};
                    products.forEach(p => {
                        if (p.category) {
                            categoryMap[p.category] = (categoryMap[p.category] || 0) + 1;
                        }
                    });
                    
                    const categoryIcons = {
                            'Electronics': 'üì±',
                            'Clothing': 'üëï',
                            'Books': 'üìö',
                            'Home': 'üè†',
                            'Home & Office': 'üè¢',
                            'Office': 'üíº',
                            'Accessories': 'üëú',
                            'Sports': '‚öΩ',
                            'Toys': 'üß∏',
                            'Beauty': 'üíÑ',
                            'Food': 'üçî',
                            'Garden': 'üå±',
                            'Automotive': 'üöó',
                            'Jewelry': 'üíç',
                            'Watches': '‚åö',
                            'Shoes': 'üëü',
                            'Bags': 'üéí',
                            'Furniture': 'üõãÔ∏è',
                            'Kitchen': 'üç≥',
                            'Tools': 'üîß',
                            'Pet Supplies': 'üêæ',
                            'Health': 'üè•',
                            'Music': 'üéµ',
                            'Gaming': 'üéÆ',
                            'Cameras': 'üì∑',
                            'Computers': 'üíª'
                        };
                    
                    const categoriesHtml = Object.entries(categoryMap)
                        .map(([category, count]) => `
                            <a href="/web/products" class="category-card">
                                <div class="category-icon">${categoryIcons[category] || 'üì¶'}</div>
                                <div class="category-name">${category}</div>
                                <div class="category-count">${count} ${count === 1 ? 'product' : 'products'}</div>
                            </a>
                        `).join('');
                    
                    if (categoriesHtml) {
                        document.getElementById('categoriesGrid').innerHTML = categoriesHtml;
                    } else {
                        document.getElementById('categoriesGrid').innerHTML = `
                            <div class="empty-state" style="grid-column: 1 / -1;">
                                <p>No categories available</p>
                            </div>
                        `;
                    }
                }
            } catch (error) {
                console.error('Failed to load categories');
            }
        }

        // Load Featured Products
        async function loadFeaturedProducts() {
            try {
                const response = await fetch('/api/products');
                
                if (response.ok) {
                    const products = await response.json();
                    const featured = products.slice(0, 8);
                    
                    const productsHtml = featured.map(product => `
                        <div class="product-card">
                            <img src="${product.imageUrl || '/images/placeholder.png'}" 
                                 alt="${product.name}" 
                                 class="product-image"
                                 onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22250%22 height=%22220%22%3E%3Crect fill=%22%23e5e7eb%22 width=%22250%22 height=%22220%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-size=%2240%22 fill=%22%236b7280%22%3EüõçÔ∏è%3C/text%3E%3C/svg%3E'">
                            <div class="product-info">
                                <div class="product-name">${product.name}</div>
                                <div class="product-price">$${product.price.toFixed(2)}</div>
                                <div class="product-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (${Math.floor(Math.random() * 500) + 100})</div>
                                <a href="/web/product-details?id=${product.id}" style="display:block;background:#667eea;color:white;padding:0.8rem;border-radius:8px;text-decoration:none;font-weight:600;text-align:center;transition:all 0.3s ease;" 
                                   onmouseover="this.style.background='#5568d3'" 
                                   onmouseout="this.style.background='#667eea'">
                                    View Product
                                </a>
                            </div>
                        </div>
                    `).join('');
                    
                    document.getElementById('featuredProducts').innerHTML = productsHtml;
                    document.getElementById('dealsProducts').innerHTML = productsHtml;
                }
            } catch (error) {
                console.error('Failed to load products');
            }
        }

        // Initialize
        initNavbar();
        loadCategories();
        loadFeaturedProducts();
        
        // Start auto-slide
        slideInterval = setInterval(autoSlide, 5000);
    </script>
</body>
</html>
